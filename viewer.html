<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Viewer â€” Code / YAML</title>
    <link rel="stylesheet" href="assets/style.css">
    <style>
      /* layout fixe : la page ne s'agrandit pas avec le contenu */
      html, body { height: 100%; margin: 0; }
      .container { height: 100vh; display: flex; flex-direction: column; padding: 18px; box-sizing: border-box; max-width: 1200px; margin: 0 auto; }
      .header-container { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
      #download-button { padding: 6px 12px; background: var(--accent); color: #071026; border-radius: 6px; text-decoration: none; font-weight: 600; font-size: 13px; display: none; }
      .viewer { display: flex; gap: 12px; flex: 1; min-height: 0; align-items: stretch; width: 100%; }
      .panel { flex: 1; display: flex; flex-direction: column; border-radius: 10px; border: 1px solid var(--border); background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02)); padding: 12px; min-width: 0; min-height: 0; width: 50%; }
      .panel .title { display: flex; justify-content: space-between; align-items: center; gap: 8px; margin-bottom: 8px; }
      /* â†“â†“â†“ Reduit la hauteur des boÃ®tes de code (demande de l'utilisateur) â†“â†“â†“ */
      .code-box { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace; font-size: 14px; background: #021123; color: #dbeafe; padding: 10px; border-radius: 8px; overflow: auto; white-space: pre; /* pas de wrap */ flex: none; /* ne prend pas tout l'espace */ height: 260px; max-height: 40vh; min-height: 620px; width: 100%; box-sizing: border-box; }
      /* â†‘â†‘â†‘ boÃ®tes plus petites â€” ajustables (height / max-height) â†‘â†‘â†‘ */
      .controls { display: flex; gap: 8px; align-items: center; }
      .note { color: var(--muted); font-size: 13px; margin-top: 10px; text-align:left; }
      .error { color: #ffdede; background: #5a1414; padding: 8px; border-radius: 6px; margin-top: 8px; }
      .code-box:focus { outline: 2px solid rgba(96, 165, 250, 0.14); }
      /* Responsive : empile les panels sur petit Ã©cran */
      @media (max-width: 820px) {
        .viewer { flex-direction: column; }
        .panel { width: 100%; }
        .code-box { height: 220px; }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header-container">
        <div style="display:flex;align-items:center;gap:12px;">
          <a href="index.html" class="badge">Retour</a>
          <body>
  <h1 style="color:red">TEST VERSION 5 ðŸš€</h1>

          <h1 style="margin:0;" id="viewer-title">Viewer â€” Code / YAML</h1>
        </div>

        <!-- bouton tÃ©lÃ©chargement : sera configurÃ© par assets/viewer.js -->
        <a id="download-button" class="button" href="#" download> TÃ©lÃ©charger ZIP </a>
      </div>

      <!-- NOTE: on garde l'Ã©lÃ©ment info mais on n'affiche plus la ligne "Affichage local..." -->
      <div id="info" class="note" style="margin-top:10px"></div>

      <div class="viewer" id="viewer" aria-live="polite">
        <!-- Panel Code Python -->
        <div class="panel" aria-label="Code Python">
          <div class="title">
            <strong id="code-title">Code Python â€” <span id="code-name">Nom du code</span></strong>
            <div class="controls">
              <button id="copy-code" class="button secondary">Copier le code</button>
              <a id="raw-code-link" class="button" href="#" target="_blank" rel="noopener">Ouvrir brut</a>
            </div>
          </div>
          <pre id="code-box" class="code-box" tabindex="0">â€¦</pre>
        </div>

        <!-- Panel YAML -->
        <div class="panel" aria-label="YAML">
          <div class="title">
            <strong id="yaml-title">YAML / Config â€” <span id="yaml-name">Nom du code</span></strong>
            <div class="controls">
              <button id="copy-yaml" class="button secondary">Copier le YAML</button>
              <a id="raw-yaml-link" class="button" href="#" target="_blank" rel="noopener">Ouvrir brut</a>
            </div>
          </div>
          <pre id="yaml-box" class="code-box" tabindex="0">â€¦</pre>
        </div>
      </div>

      <div id="error" style="margin-top:12px"></div>
    </div>

    <!-- Chargement de downloads.js en premier -->
    <script src="downloads.js"></script>
    <!-- Chargement de viewer.js (logique : rempli les boxes, configure le bouton download, etc.) -->
    <script src="assets/viewer.js"></script>
  </body>
</html>
