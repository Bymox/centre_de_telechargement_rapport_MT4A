<!-- viewer.html -->
<!doctype html>
<html lang="fr" data-theme="a">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Viewer — Code / YAML</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/style.css">
    <style>
      /* small overrides for viewer layout */
      html, body { height: 100%; margin: 0; }
      .container { height: 100vh; display: flex; flex-direction: column; padding: 18px; box-sizing: border-box; max-width: 1200px; margin: 0 auto; }
      .header-container { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
      .viewer { display: flex; gap: 12px; flex: 1; min-height: 0; align-items: stretch; width: 100%; }
      .panel { flex: 1; display: flex; flex-direction: column; border-radius: 10px; border: 1px solid var(--border); background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02)); padding: 12px; min-width: 0; min-height: 0; width: 50%; }
      .panel .title { display: flex; justify-content: space-between; align-items: center; gap: 8px; margin-bottom: 8px; }
      .controls { display: flex; gap: 8px; align-items: center; }
      .note { color: var(--muted); font-size: 13px; margin-top: 10px; text-align:left; }
      .error { color: #ffdede; background: #5a1414; padding: 8px; border-radius: 6px; margin-top: 8px; }
      @media (max-width: 820px) { .viewer { flex-direction: column; } .panel { width: 100%; } }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header-container">
       <div style="display:flex;align-items:center;gap:12px;">
          <a href="index.html" class="badge">Retour</a>
          <h1 style="margin:0;" id="viewer-title">Viewer — </h1>
        </div>

        <!-- bouton téléchargement : sera configuré par assets/viewer.js -->
        <a id="download-button" class="button" href="#" download style="display:none"> Télécharger ZIP </a>
      </div>

      <div id="info" class="note" style="margin-top:10px"></div>

      <div class="viewer" id="viewer" aria-live="polite">
        <!-- Panel Code Python -->
        <div class="panel" aria-label="Code Python">
          <div class="title">
            <strong id="code-title">Code Python — <span id="code-name">Nom du code</span></strong>
            <div class="controls">
              <button id="copy-code" class="button secondary">Copier le code</button>
              <a id="raw-code-link" class="button" href="#" target="_blank" rel="noopener">Ouvrir brut</a>
            </div>
          </div>
          <pre id="code-box" class="code-box" tabindex="0">…</pre>
        </div>

        <!-- Panel YAML -->
        <div class="panel" aria-label="YAML">
          <div class="title">
            <strong id="yaml-title">YAML / Config — <span id="yaml-name">Nom du code</span></strong>
            <div class="controls">
              <button id="copy-yaml" class="button secondary">Copier le YAML</button>
              <a id="raw-yaml-link" class="button" href="#" target="_blank" rel="noopener">Ouvrir brut</a>
            </div>
          </div>
          <pre id="yaml-box" class="code-box" tabindex="0">…</pre>
        </div>
      </div>

      <div id="error" style="margin-top:12px"></div>
    </div>

    <script src="downloads.js"></script>
    <script src="assets/viewer.js"></script>
  </body>
</html>